(jbuild_version 1)

(rule
 ((targets (t1.ml))
  (deps (t1/a t1/b t1/c t1/d))
  (action (run ${bin:ocaml-crunch} t1 -o ${@}))))

(executable
 ((name consumer)
  (libraries (lwt io-page io-page.unix bos cstruct mirage-kwt-lwt rresult))
  (modules (t1 consumer))))

(alias
 ((name runtest)
  (deps (consumer.exe))
  (action (run ${<}))))